#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run linting
echo "üîç Running ESLint..."
npm run lint

# Run tests (critical for security)
echo "üß™ Running tests..."
npm run test:ci

# Scan for secrets (if gitleaks is available)
echo "üîí Scanning for secrets..."
if command -v gitleaks &> /dev/null; then
    gitleaks protect --staged --config .gitleaks.toml
else
    echo "‚ö†Ô∏è  Gitleaks not found - install from https://github.com/gitleaks/gitleaks for secret scanning"
    echo "   Installation: https://github.com/gitleaks/gitleaks#installing"
fi
